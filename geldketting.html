<!doctype html>
<html lang="nl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Geldketting Overlay</title>
<style>
  body {
    margin: 0;
    background: transparent;
    font-family: sans-serif;
    color: white;
    text-align: center;
  }
  .chain-container {
    display: flex;
    flex-direction: column-reverse;
    align-items: center;
    gap: 10px;
    padding-bottom: 20px;
  }
  .step, .bank {
    border-radius: 50% / 50%;
    padding: 8px 20px;
    min-width: 100px;
    background: rgba(0,0,0,0.6);
    transition: all 0.3s ease;
  }
  .bank {
    font-size: 1.5em;
    font-weight: bold;
    background: rgba(50,200,50,0.8);
  }
  .active {
    transform: scale(1.3);
    background: rgba(255,200,0,0.8);
  }
</style>
</head>
<body>
<div class="chain-container" id="chainContainer">
  <div class="bank" id="bankDisplay">BANK €0.00</div>
</div>

<script src="geldketting.js"></script>
<script>
const container = document.getElementById('chainContainer');
const bankEl = document.getElementById('bankDisplay');

function renderChain(state) {
    // update bank
    bankEl.textContent = `BANK €${state.bankTotal.toFixed(2)}`;

    // verwijder oude stappen
    container.querySelectorAll('.step').forEach(el => el.remove());

    // render nieuwe stappen
    state.moneyChain.forEach((val, idx) => {
        const step = document.createElement('div');
        step.className = 'step';
        step.textContent = `€${val.toFixed(2)}`;

        // highlight huidige ketting
        if (val <= state.chainAccum) step.classList.add('active');

        // maak laatste stap groter (zelfde als bank)
        if (idx === state.moneyChain.length - 1) {
            step.style.fontSize = '1.2em';
            step.style.minWidth = '120px';
        }

        container.insertBefore(step, bankEl);
    });
}

// callback van overlay script
window.MoneyChainOverlay.updateCallback = renderChain;
</script>
</body>
</html>
